<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Common Tricks - Knowledge Portal</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Knowledge Portal</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="common_tricks.html" class="active"><strong aria-hidden="true">1.1.</strong> Common Tricks</a></li><li class="chapter-item expanded "><a href="useful_links.html"><strong aria-hidden="true">1.2.</strong> Useful Links</a></li></ol></li><li class="chapter-item expanded "><a href="marker_entities.html"><strong aria-hidden="true">2.</strong> Marker Entities</a></li><li class="chapter-item expanded "><a href="nbt.html"><strong aria-hidden="true">3.</strong> NBT</a></li><li class="chapter-item expanded "><a href="custom_recipes.html"><strong aria-hidden="true">4.</strong> Recipes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="recipes/normal.html"><strong aria-hidden="true">4.1.</strong> Normal</a></li><li class="chapter-item expanded "><a href="recipes/with_nbt.html"><strong aria-hidden="true">4.2.</strong> With NBT</a></li></ol></li><li class="chapter-item expanded "><a href="advancements.html"><strong aria-hidden="true">5.</strong> Advancements</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="advancements/advancements.html"><strong aria-hidden="true">5.1.</strong> Creating</a></li><li class="chapter-item expanded "><a href="advancements/triggers.html"><strong aria-hidden="true">5.2.</strong> Triggers</a></li></ol></li><li class="chapter-item expanded "><a href="worldgen.html"><strong aria-hidden="true">6.</strong> Worldgen</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="worldgen/biomes.html"><strong aria-hidden="true">6.1.</strong> Biomes</a></li><li class="chapter-item expanded "><a href="worldgen/features.html"><strong aria-hidden="true">6.2.</strong> Features</a></li><li class="chapter-item expanded "><a href="worldgen/structures.html"><strong aria-hidden="true">6.3.</strong> Structures</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Knowledge Portal</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="good-datapack-practices-and-common-tricks"><a class="header" href="#good-datapack-practices-and-common-tricks">Good Datapack Practices and Common Tricks</a></h1>
<p>Written by Ellivers</p>
<h2 id="structuring-and-consistency"><a class="header" href="#structuring-and-consistency">Structuring and Consistency</a></h2>
<p>An organized structure to your data pack's folders and file names always helps you understand your code better and leads to less bugs.
Place files that have something in common in the same folder, and name them based on what their purpose is.</p>
<p>Consistency in naming stuff like tags, files, and scores can help keep you sane. Always have a clear structure in place, such as prefixing tag and objective names with your namespace (<code>namespace.name</code>) and giving tags different categories (<code>namespace.entity.name</code>, <code>namespace.block.name</code>).</p>
<p>If you are unsure of how a good structure could look, you could take a look at some vanilla assets, such as the lang file or the built-in data pack, as well as get ideas from looking at data packs that other people have made.</p>
<h2 id="commenting"><a class="header" href="#commenting">Commenting</a></h2>
<p>Comments are very important and a huge help when working with functions, as well as any code in general. Ideally, every function should have at least one line of comments in it. A comment is any line that starts with a <code>#</code>.</p>
<p>Here is how I like to structure my comments:</p>
<pre><code class="language-mcfunction"># Called by namespace:path/to/function
# Short description of what this function does
# More describing if needed

# Description of what these commands do
command 1
command 2

# Description of what these commands do
command 3
command 4
</code></pre>
<h2 id="performance"><a class="header" href="#performance">Performance</a></h2>
<p>Functions in data packs can easily lead to bad performance. Here is a list of some things to be aware of:</p>
<ul>
<li>
<p><strong>Multiple Entity Selectors</strong></p>
<p><strong>@e</strong> is an essential selector as it is able to select all entities, but it is also a huge reason for command lag.
Therefore, it should be avoided in large quantities as much as possible. If you execute a function as an entity, you can then use the <code>@s</code> selector to refer to that entity. <code>@s</code> is the selector you should be using the most.</p>
<p>Example of splitting an <code>@e</code> selector into multiple <code>@s</code>:</p>
<p>function1:</p>
<pre><code class="language-mcfunction"># Executes as all pigs that have the &quot;namespace.mytag&quot; tag
execute as @e[type=minecraft:pig,tag=namespace.mytag] run function namespace:function2
</code></pre>
<p>function2:</p>
<pre><code class="language-mcfunction"># Called by namespace:function1
# Runs commands as all pigs that have the &quot;namespace.mytag&quot; tag

say My name is @s
kill @s
say ouch
</code></pre>
<p><strong>@a</strong> is another selector that selects multiple entities.
It only selects players, and there are usually not nearly as many players as general entities in a world, so it does not contribute to lag as much as <code>@e</code>. However, if you have a lot of <code>@a</code> selectors you should still be splitting them into <code>@s</code>, the same way you do with <code>@e</code>.</p>
</li>
<li>
<p><strong>NBT Checks</strong></p>
<p>Checking for NBT data hurts performance quite a lot, and is something that you should avoid as much as possible.</p>
<p>Example of a bad NBT check:</p>
<pre><code class="language-mcfunction"># Check if the executing player is holding a feather
execute if entity @s[nbt={SelectedItem:{id:&quot;minecraft:feather&quot;}}]
</code></pre>
<p><strong>Predicates</strong></p>
<p>Predicates are JSON files that can be used in combination with commands to check for all kinds of things.</p>
<p>Often, NBT checks can be replaced with predicates to improve performance. This is the case for the command shown above.</p>
<p>Here is what a predicate replacing the NBT check above would look like:</p>
<pre><code class="language-json">{
  &quot;condition&quot;: &quot;minecraft:entity_properties&quot;,
  &quot;entity&quot;: &quot;this&quot;,
  &quot;predicate&quot;: {
      &quot;equipment&quot;: {
          &quot;mainhand&quot;: {
              &quot;item&quot;: &quot;minecraft:feather&quot;
          }
      }
  }
}
</code></pre>
<p>It could replace the check in the command like this:</p>
<pre><code class="language-mcfunction"># Check if the executing player is holding a feather
execute if predicate namespace:path/to/predicate
</code></pre>
<p>However, predicates will not help if you only use them to check using the <code>nbt</code> key.
This is an example of something that does <em>not</em> help performance:</p>
<pre><code>{
  &quot;condition&quot;: &quot;minecraft:entity_properties&quot;,
  &quot;entity&quot;: &quot;this&quot;,
  &quot;predicate&quot;: {
      &quot;nbt&quot;: &quot;{OnGround:1b}&quot;
  }
}
</code></pre>
<p>Notice how the predicate above only checks for the property <code>OnGround:1b</code>, and does not use any keys other than <code>nbt</code>.
In this case, it is better to simply check the NBT in the command directly:</p>
<pre><code class="language-mcfunction"># Check if the executing entity is on the ground
execute if entity @s[nbt={OnGround:1b}]
</code></pre>
<p><strong>Storage</strong></p>
<p>Storage is global NBT that can contain anything you want and that can be accessed from anywhere. It is the most performance-friendly option for storing NBT, but is not specific to any entity or block.</p>
<p>If you need to either modify NBT several times, or check it multiple times while predicates are not applicable, using storage can be a lot more efficient.</p>
<p>Here is an example:</p>
<pre><code class="language-mcfunction"># Set the X, Y, and Z coordinates of the executing entity's position

data modify storage namespace:name Key set from entity @s Pos
data modify storage namespace:name Key[0] set value 3.0d
data modify storage namespace:name Key[1] set value 7.0d
data modify storage namespace:name Key[2] set value 85.0d
data modify entity @s Pos set from storage namespace:name Key
</code></pre>
</li>
</ul>
<h2 id="advancements"><a class="header" href="#advancements">Advancements</a></h2>
<p>When you need to detect something a player does, like placing a block, first see if that is something an advancement can detect, instead of creating a scoreboard objective for it or perhaps running a check for it every tick. Advancements are very useful and powerful, as they do not cause any lag (with the exception of the <code>tick</code> advancement trigger) and can be used to run a function when something happens.</p>
<h2 id="fakeplayers"><a class="header" href="#fakeplayers">Fakeplayers</a></h2>
<p>&quot;Fakeplayers&quot; are an extremely useful trick used in order to avoid creating big amounts of scoreboard objectives.
Simply give a score to a nonexistant player, and you are able to make way more variables using only one objective and no entities.</p>
<p>Here is an example of what you can do using fakeplayers:</p>
<pre><code class="language-mcfunction"># Do some math

scoreboard players set #five objective 5

scoreboard players operation #variable1 objective *= #five objective
scoreboard players operation #variable2 objective += #variable1 objective
</code></pre>
<p>Notice how the fakeplayer names are prefixed with <code>#</code>. This is not needed, but it makes sure that the fakeplayer's name can't happen to be the same as a real player's name, since real players can't have <code>#</code> in their name.
Fakeplayers are global and not applicable if you need to tie a score to an entity.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="useful_links.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="useful_links.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
